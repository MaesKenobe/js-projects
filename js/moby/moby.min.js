var Moby=function(o){Moby.instances++,this.breakpoint=void 0===o.breakpoint?1024:o.breakpoint,this.enableEscape=void 0===o.enableEscape||o.enableEscape,this.menu=void 0===o.menu?$("#main-nav"):o.menu,this.menuClass=void 0===o.menuClass?"right-side":o.menuClass,this.mobyTrigger=void 0===o.mobyTrigger?$("#moby-button"):o.mobyTrigger,this.onClose=void 0!==o.onClose&&o.onClose,this.onOpen=void 0!==o.onOpen&&o.onOpen,this.overlay=void 0===o.overlay||o.overlay,this.overlayClass=void 0===o.overlayClass?"dark":o.overlayClass,this.subMenuOpenIcon=void 0===o.subMenuOpenIcon?"<span>&#x25BC;</span>":o.subMenuOpenIcon,this.subMenuCloseIcon=void 0===o.subMenuCloseIcon?"<span>&#x25B2;</span>":o.subMenuCloseIcon,this.template=void 0!==o.template&&o.template,!0===this.overlay&&($("body").prepend('<div class="moby-overlay '+this.overlayClass+'" id="moby-overlay'+Moby.instances+'"></div>'),this.overlaySelector=$("body").find("#moby-overlay"+Moby.instances),this.overlaySelector.on("click",this.closeMoby.bind(this))),$("body").prepend('<div class="moby moby-hidden '+this.menuClass+'" id="moby'+Moby.instances+'"></div>'),this.mobySelector=$("body").find("#moby"+Moby.instances),this.cloneMenu(),this.mobySelector.on("click",".moby-close",this.closeMoby.bind(this)),!0===this.enableEscape&&$(document).on("keydown",function(o){27==o.keyCode&&this.closeMoby()}.bind(this)),this.mobyTrigger.on("click",this.openMoby.bind(this)),$(window).on("resize",this.breakpointResize.bind(this)),this.mobySelector.on("click",".moby-expand",function(o){o.preventDefault(),o.stopPropagation(),this.mobyExpandSubMenu($(o.currentTarget))}.bind(this)),this.mobySelector.on("click","a",this.mobyPreventDummyLinks.bind(this))};Moby.instances=0,Moby.slideTransition=200,Moby.prototype.closeMoby=function(){var o=$("body").find(".moby.moby-active");o.length>0&&(!0===this.overlay&&$("body").find(".moby-overlay.moby-overlay-active").removeClass("moby-overlay-active"),o.removeClass("moby-active"),$("body").removeClass("moby-body-fixed"),!1!==this.onClose&&this.onClose())},Moby.prototype.cloneMenu=function(){var o="",e=this.subMenuOpenIcon;if(!1===this.template?(o='<div class="moby-wrap">',o+='<div class="moby-close"><span class="moby-close-icon"></span> Close Menu</div>',o+='<div class="moby-menu"></div>',o+="</div>"):o=this.template,this.mobySelector.append(o),this.mobySelector.find(".moby-menu").length<1)return console.error("You must have a moby-menu class in your template!"),!1;this.menu.clone().appendTo(this.mobySelector.find(".moby-menu")),this.mobySelector.find(".moby-menu *[id]").removeAttr("id"),this.mobySelector.find(".moby-menu li").each((function(){$(this).find("ul").length>0&&$(this).find("> a").append("<span class='moby-expand'>"+e+"</span>")})),this.mobySelector.removeClass("moby-hidden")},Moby.prototype.openMoby=function(){this.mobySelector.addClass("moby-active"),$("body").addClass("moby-body-fixed"),!0===this.overlay&&this.overlaySelector.addClass("moby-overlay-active"),!1!==this.onOpen&&this.onOpen()},Moby.prototype.breakpointResize=function(){var o=window.outerWidth;if(!1===this.breakpoint)return!1;o>=this.breakpoint&&this.mobySelector.hasClass("moby-active")&&this.closeMoby()},Moby.prototype.mobyExpandSubMenu=function(o){o.hasClass("moby-submenu-open")?(o.removeClass("moby-submenu-open"),o.html(this.subMenuOpenIcon),o.parents("li").first().find("> ul").slideUp(Moby.slideTransition)):(o.addClass("moby-submenu-open"),o.html(this.subMenuCloseIcon),o.parents("li").first().find("> ul").slideDown(Moby.slideTransition))},Moby.prototype.mobyPreventDummyLinks=function(o){var e=$(this).find("> .moby-expand");"#"==$(this).attr("href")&&(o.preventDefault(),e.length>0&&e.trigger("click"))};